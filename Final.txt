include macros2.asm
include number.asm

.MODEL LARGE
.STACK 200h
.386
.387
.DATA

	MAXTEXTSIZE equ 50
	@var1 	DD 0
	@var2 	DD 0
	@var3 	DD 0
	@varString1 	DB MAXTEXTSIZE dup (?),'$'
	@varString2 	DB MAXTEXTSIZE dup (?),'$'
	@varString3 	DB MAXTEXTSIZE dup (?),'$'
	@_Inicio_del_programa 	DB "Inicio del programa",'$',31 dup(?)
	@_4 	DD 4.0
	@_5 	DD 5.0
	@_1 	DD 1.0
	@_2 	DD 2.0
	@_3 	DD 3.0
	@_Var_2_es_5 	DB "Var 2 es 5",'$',40 dup(?)
	@_var1_no_es_4 	DB "var1 no es 4",'$',38 dup(?)
	@_var1_es_4 	DB "var1 es 4",'$',41 dup(?)
	@_Fin_del_programa 	DB "Fin del programa",'$',34 dup(?)

.CODE
.startup
	mov AX,@DATA
	mov DS,AX

	FINIT

	displayString 	@_Inicio_del_programa
	newLine 1
	fld 	@_4
	fstp 	@var1
	fld 	@_5
	fstp 	@var2
	fld 	@_1
	fstp 	@var3
if_1:
cond_if_1:
	fld 	@var1
	fld 	@var2
	fcomp
	fstsw	ax
	fwait
	sahf
	jbe		else_if_1
	fld 	@_2
	fstp 	@var3
else_if_1:
if_2:
cond_if_2:
	fld 	@_1
	fld 	@var3
	fcomp
	fstsw	ax
	fwait
	sahf
	jbe		else_if_2
	fld 	@_3
	fstp 	@var3
else_if_2:
	fld 	@_4
	fstp 	@var3
end_if_2:
end_if_1:
if_3:
cond_if_3:
	fld 	@_5
	fld 	@var2
	fcomp
	fstsw	ax
	fwait
	sahf
	jne		end_if_3
	displayString 	@_Var_2_es_5
	newLine 1
if_4:
cond_if_4:
	fld 	@_4
	fld 	@var1
	fcomp
	fstsw	ax
	fwait
	sahf
	je		else_if_4
	displayString 	@_var1_no_es_4
	newLine 1
else_if_4:
	displayString 	@_var1_es_4
	newLine 1
end_if_4:
end_if_3:
	displayFloat 	@var3,3
	newLine 1
	displayString 	@_Fin_del_programa
	newLine 1
	mov ah, 4ch
	int 21h

;FIN DEL PROGRAMA DE USUARIO

strlen proc
	mov bx, 0
	strl01:
	cmp BYTE PTR [si+bx],'$'
	je strend
	inc bx
	jmp strl01
	strend:
	ret
strlen endp

copiar proc
	call strlen
	cmp bx , MAXTEXTSIZE
	jle copiarSizeOk
	mov bx , MAXTEXTSIZE
	copiarSizeOk:
	mov cx , bx
	cld
	rep movsb
	mov al , '$'
	mov byte ptr[di],al
	ret
copiar endp

concat proc
	push ds
	push si
	call strlen
	mov dx , bx
	mov si , di
	push es
	pop ds
	call strlen
	add di, bx
	add bx, dx
	cmp bx , MAXTEXTSIZE
	jg concatSizeMal
	concatSizeOk:
	mov cx , dx
	jmp concatSigo
	concatSizeMal:
	sub bx , MAXTEXTSIZE
	sub dx , bx
	mov cx , dx
	concatSigo:
	push ds
	pop es
	pop si
	pop ds
	cld
	rep movsb
	mov al , '$'
	mov byte ptr[di],al
	ret
concat endp

end